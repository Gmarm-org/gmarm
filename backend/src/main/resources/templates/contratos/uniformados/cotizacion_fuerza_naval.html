<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Cotización</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
            color: #000;
            margin: 40px;
            line-height: 1.2;
            text-align: justify;
        }
        .titulo {
            text-align: center;
            font-weight: bold;
            margin-bottom: 14px;
        }
        .datos {
            margin-bottom: 12px;
        }
        .datos div {
            margin: 2px 0;
        }
        .tabla {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }
        .tabla th,
        .tabla td {
            border: 1px solid #000;
            padding: 4px;
            text-align: center;
            font-size: 10px;
        }
        .payment-title {
            margin: 10px 0 6px 0;
            font-weight: bold;
        }
        .payment-item {
            margin: 4px 0;
        }
        .label {
            font-weight: bold;
        }
        .bank {
            margin-top: 10px;
        }
        .signature-section {
            margin-top: 26px;
            page-break-inside: avoid;
        }
        .signature-table {
            width: 100%;
            border-collapse: collapse;
        }
        .signature-cell {
            width: 45%;
            vertical-align: bottom;
            text-align: center;
        }
        .signature-spacer {
            width: 10%;
        }
        .signature-line {
            border-bottom: 1px solid #000;
            margin: 18px 0 6px 0;
            height: 1px;
        }
    </style>
</head>
<body>
    <div class="titulo">
        COTIZACIÓN #<span th:text="${numeroCotizacion}">NM-0001-2026</span>.
    </div>

    <div class="datos">
        <div>
            <strong>Cliente:</strong>
            <span th:text="${#strings.toUpperCase(cliente.nombres + ' ' + cliente.apellidos)}">NOMBRE CLIENTE</span>
            - <span th:text="${tipoUniformadoLabel}">MILITAR</span> EN SERVICIO
            <span th:text="${estadoMilitarUpper}">ACTIVO</span>
        </div>
        <div><strong>Cédula:</strong> <span th:text="${cliente.numeroIdentificacion}">0000000000</span></div>
        <div><strong>Fecha:</strong> <span th:text="${fechaCotizacion}">18 de enero de 2026</span></div>
    </div>

    <p>
        Nos permitimos enviar la Cotización para
        <strong th:text="${cantidadArmasTexto}">01 arma</strong>
        de las siguientes características:
    </p>

    <table class="tabla">
        <thead>
            <tr>
                <th>TIPO</th>
                <th>MARCA</th>
                <th>MODELO</th>
                <th>CALIBRE</th>
                <th>ALIMENTADORAS DE FÁBRICA</th>
                <th>PRECIO INCLUIDO IVA</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="arma : ${armasDetalle}">
                <td th:text="${arma.categoria}">PISTOLA</td>
                <td th:text="${arma.marca}">CZ</td>
                <td th:text="${arma.modelo}">P-10F</td>
                <td th:text="${arma.calibre}">9MM</td>
                <td th:text="${arma.alimentadora}">2 (DOS)</td>
                <td th:text="${arma.precioConIvaFormateado}">$1.800,00</td>
            </tr>
        </tbody>
    </table>

    <p>El arma será cancelada en la siguiente manera:</p>
    <div class="payment-title">Las partes han acordado que los pagos serán mensualizados de la siguiente manera:</div>

    <div class="payment-item" th:if="${pago != null and pago.tipoPago == 'CONTADO'}">
        <span class="label">a).-</span>
        A las 24 horas después de la suscripción del presente contrato, la cantidad de USD
        <span th:text="${#numbers.formatDecimal(pago.montoTotal, 1, 2)}">0.00</span>
        (<span th:text="${numberToTextService.convertToText(pago.montoTotal) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
    </div>

    <div th:if="${pago != null and pago.tipoPago == 'CREDITO'}">
        <div class="payment-item">
            <span class="label">a).-</span>
            A las 24 horas después de la suscripción del presente contrato, la cantidad de USD
            <span th:text="${#numbers.formatDecimal(pago.montoCuota, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(pago.montoCuota) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
        <div class="payment-item" th:if="${cuotas != null and cuotas.size() >= 2}">
            <span class="label">b).-</span>
            Hasta el <span th:text="${#temporals.format(cuotas[1].fechaVencimiento, 'dd')}">01</span> de
            <span th:text="${T(java.time.format.DateTimeFormatter).ofPattern('MMMM yyyy', new java.util.Locale('es','ES')).format(cuotas[1].fechaVencimiento)}">enero 2026</span>,
            USD <span th:text="${#numbers.formatDecimal(cuotas[1].monto, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(cuotas[1].monto) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
        <div class="payment-item" th:if="${cuotas != null and cuotas.size() >= 3}">
            <span class="label">c).-</span>
            Hasta el <span th:text="${#temporals.format(cuotas[2].fechaVencimiento, 'dd')}">01</span> de
            <span th:text="${T(java.time.format.DateTimeFormatter).ofPattern('MMMM yyyy', new java.util.Locale('es','ES')).format(cuotas[2].fechaVencimiento)}">enero 2026</span>,
            USD <span th:text="${#numbers.formatDecimal(cuotas[2].monto, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(cuotas[2].monto) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
        <div class="payment-item" th:if="${cuotas != null and cuotas.size() >= 4}">
            <span class="label">d).-</span>
            Hasta el <span th:text="${#temporals.format(cuotas[3].fechaVencimiento, 'dd')}">01</span> de
            <span th:text="${T(java.time.format.DateTimeFormatter).ofPattern('MMMM yyyy', new java.util.Locale('es','ES')).format(cuotas[3].fechaVencimiento)}">enero 2026</span>,
            USD <span th:text="${#numbers.formatDecimal(cuotas[3].monto, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(cuotas[3].monto) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
        <div class="payment-item" th:if="${cuotas != null and cuotas.size() >= 5}">
            <span class="label">e).-</span>
            Hasta el <span th:text="${#temporals.format(cuotas[4].fechaVencimiento, 'dd')}">01</span> de
            <span th:text="${T(java.time.format.DateTimeFormatter).ofPattern('MMMM yyyy', new java.util.Locale('es','ES')).format(cuotas[4].fechaVencimiento)}">enero 2026</span>,
            USD <span th:text="${#numbers.formatDecimal(cuotas[4].monto, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(cuotas[4].monto) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
        <div class="payment-item" th:if="${cuotas != null and cuotas.size() >= 6}">
            <span class="label">f).-</span>
            Hasta el <span th:text="${#temporals.format(cuotas[5].fechaVencimiento, 'dd')}">01</span> de
            <span th:text="${T(java.time.format.DateTimeFormatter).ofPattern('MMMM yyyy', new java.util.Locale('es','ES')).format(cuotas[5].fechaVencimiento)}">enero 2026</span>,
            USD <span th:text="${#numbers.formatDecimal(cuotas[5].monto, 1, 2)}">0.00</span>
            (<span th:text="${numberToTextService.convertToText(cuotas[5].monto) + ' DÓLARES DE LOS ESTADOS UNIDOS'}">CERO</span>).
        </div>
    </div>

    <div class="bank">
        <div>El depósito deberá realizarlo en la cuenta bancaria:</div>
        <div>Banco: <span th:text="${licenciaNombreBanco}">Guayaquil</span></div>
        <div>Cuenta: <span th:text="${licenciaTipoCuenta}">Corriente</span></div>
        <div>Número: <span th:text="${licenciaCuentaBancaria}">0000000000</span></div>
    </div>

    <div class="signature-section">
        <div>Para constancia de aceptación de la proforma firman.</div>
        <table class="signature-table">
            <tr>
                <td class="signature-cell">
                    <div class="signature-line"></div>
                    <div th:text="${#strings.toUpperCase(licenciaNombre)}">LICENCIA</div>
                    <div>Distribuidor Autorizado</div>
                    <div>CZ Ceska Zbrojovka</div>
                </td>
                <td class="signature-spacer"></td>
                <td class="signature-cell">
                    <div class="signature-line"></div>
                    <div th:text="${#strings.toUpperCase(cliente.nombres + ' ' + cliente.apellidos)}">CLIENTE</div>
                    <div>C.C. <span th:text="${cliente.numeroIdentificacion}">0000000000</span></div>
                    <div>ACEPTO LA COTIZACIÓN</div>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
